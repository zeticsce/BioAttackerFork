import os
import re
import time
import math
import random
from typing import Any
from math import floor
from app import dp, bot, query, strconv, save_message, is_host, IsAdmin

def skloneniye(num):
    names = ['–¥–µ–Ω—å', '–¥–Ω—è', '–¥–Ω–µ–π']
    n = num % 100
    if n >= 5 and n <= 20: return names[2]
    n = num % 10
    if n == 1: return names[0]
    if n >= 2 and n <= 4: return names[1]
    return names[2]

start_text = (
    "üß™ –í—Å—Ç—É–ø–∏ –≤ —Å–º–µ—Ä—Ç–µ–ª—å–Ω—É—é –∏–≥—Ä—É –±–∏–æ–≤–æ–π–Ω!\n\n",
    "üå°Ô∏è –ì–æ—Ç–æ–≤ –ø–æ–∏–≥—Ä–∞—Ç—å —Å –∂–∏–∑–Ω—è–º–∏?\n\n",
    "üí£ –ó–∞–≤–æ–µ–≤—ã–≤–∞–π –º–∏—Ä —Å–≤–æ–∏–º –≤–∏—Ä—É—Å–æ–º!\n\n",
    "üß¨ –ì–æ—Ç–æ–≤ –∫ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Ö–∞–æ—Å—É?\n\n",
    "ü¶† –°–æ–∑–¥–∞–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–∞—Ç–æ–≥–µ–Ω!\n\n",
    "üî¨ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–∏–æ–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é!\n\n",
    "üíâ –ü–æ–≥—Ä—É–∑–∏—Å—å –≤ –º–∏—Ä –≤–∏—Ä—É—Å–æ–≤!\n\n"
)

''' –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞ '''
theme = {
    "standard" : {
        "theme_name" : "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞",
        "theme_desc" : "–î–µ—Ñ–æ–ª—Ç–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –æ–ª–¥–æ–≤ –±–∏–æ-–≤–æ–π–Ω",
        
        "biolab" : {
            "info" : "ü¶† –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏—Ä—É—Å–µ",
            "owner" : "üë∫ –í–ª–∞–¥–µ–ª–µ—Ü",
            "corp" : "üèõ –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è",
            "pats" : "üß™ –ü–∞—Ç–æ–≥–µ–Ω–æ–≤",
            "new" : "‚è± –î–æ –Ω–æ–≤–æ–≥–æ –ø–∞—Ç–æ–≥–µ–Ω–∞",
            "quala" : "üë®üèª‚Äçüî¨ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞",
            "zz" : "ü¶† –ó–∞—Ä–∞–∑–Ω–æ—Å—Ç—å",
            "im" : "üõ° –ò–º–º—É–Ω–∏—Ç–µ—Ç",
            "ll" : "‚ò†Ô∏è –õ–µ—Ç–∞–ª—å–Ω–æ—Å—Ç—å",
            "bp" : "üïµÔ∏è‚Äç‚ôÇÔ∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",
            "exp" : "‚ò£Ô∏è –ë–∏–æ-–æ–ø—ã—Ç",
            "res" : "üß¨ –ë–∏–æ-—Ä–µ—Å—É—Ä—Å",
            "operate" : "üò∑ –°–ø–µ—Ü–æ–ø–µ—Ä–∞—Ü–∏–π",
            "issue" : "ü•Ω –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã"

        },

        "errors" : {
            "wait" : "üë∫ –ñ–¥–∏ –Ω–æ–≤—ã—Ö –ø–∞—Ç–æ–≥–µ–Ω–æ–≤!",
            "10" : "üë∫ –ó–∞ —Ä–∞–∑ –º–∞–∫—Å–∏–º—É–º 10 –ø–æ–ø—ã—Ç–æ–∫!",
            "404" : "üë∫ –Æ–∑–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω!",
            "again" : "üë∫ –¢—ã —Å–º–æ–∂–µ—à—å –∑–∞—Ä–∞–∑–∏—Ç—å –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ —á–µ—Ä–µ–∑",
            "bot" : "üë∫ –ù–µ–ª—å–∑—è –∑–∞—Ä–∞–∑–∏—Ç—å –±–æ—Ç–∞!",
            "victim" : "üë∫ –ñ–µ—Ä—Ç–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
        }
    },

    "hell" : {
        "theme_name" : "–•–µ–ª–ª–æ—É–∏–Ω—Å–∫–∞—è —Ç–µ–º–∞",
        "theme_desc" : "–¢–µ–º–∞ –≤ —á–µ—Å—Ç—å –•–µ–ª–ª–æ—É–∏–Ω–∞",
        
        "biolab" : {
            "info" : "üëª –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–∑—ã–≥—Ä—ã—à–∞",
            "owner" : "üë∫ –í–ª–∞–¥–µ–ª–µ—Ü",
            "corp" : "üèõ –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è",
            "pats" : "ü™Ñ —É–∂–∞—Å—Ç–∏–∫–æ–≤",
            "new" : "‚è± –ù–æ–≤—ã–π —É–∂–∞—Å—Ç–∏–∫",
            "quala" : "üßõ –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–ª–¥—É–Ω–æ–≤",
            "zz" : "üåò –£–∂–∞—Å–Ω–æ—Å—Ç—å",
            "im" : "üåï –°—Ç–æ–π–∫–æ—Å—Ç—å",
            "ll" : "ü¶á –ö—Ä–æ–≤–æ–∂–∞–¥–Ω–æ—Å—Ç—å",
            "bp" : "üïµÔ∏è‚Äç‚ôÇÔ∏è –ù–æ—á–Ω–∞—è —Å–ª—É–∂–±–∞",
            "exp" : "ü©∏ –ê–¥—Ä–µ–Ω–∞–ª–∏–Ω",
            "res" : "üß¨ –ë–∏–æ-—Ä–µ—Å—É—Ä—Å",
            "operate" : "üò∑ –†–æ–∑—ã–≥—Ä—ã—à–µ–π",
            "issue" : "ü•Ω –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã"

        },

        "errors" : {
            "wait" : "üë∫ –ñ–¥–∏ –Ω–æ–≤—ã—Ö –ø–∞—Ç–æ–≥–µ–Ω–æ–≤!",
            "10" : "üë∫ –ó–∞ —Ä–∞–∑ –º–∞–∫—Å–∏–º—É–º 10 –ø–æ–ø—ã—Ç–æ–∫!",
            "404" : "üë∫ –Æ–∑–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω!",
            "again" : "üë∫ –¢—ã —Å–º–æ–∂–µ—à—å –∑–∞—Ä–∞–∑–∏—Ç—å –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ —á–µ—Ä–µ–∑",
            "bot" : "üë∫ –ù–µ–ª—å–∑—è –∑–∞—Ä–∞–∑–∏—Ç—å –±–æ—Ç–∞!",
            "victim" : "üë∫ –ñ–µ—Ä—Ç–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
        }
    },

    "azeri" : {
        "theme_name" : "–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∞—è —Ç–µ–º–∞",
        "theme_desc" : "–¢–µ–º–∞ –¥–ª—è –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Ü–µ–≤. –í–ù–ò–ú–ê–ù–ò–ï! –°–û–î–ï–†–ñ–ò–¢ –ù–ï–¶–ï–ù–ó–£–†–ù–£–Æ –õ–ï–ö–°–ò–ö–£ 18+!!1!",

        "biolab" : {
            "info" : "ü¶† –±–∞–∑–¥—ã–≥—ã–Ω —Å–æ—Ö–±–µ—Ç–∏",
            "owner" : "üë∫ –•–∞–Ω",
            "corp" : "üèõ –ê–∑–µ—Ä—á–∞–π",
            "pats" : "üß™ –ë–∞–∑–¥—ã–≥–ª–∞—Ä",
            "new" : "‚è± –î–æ –Ω–æ–≤–æ–≥–æ –±–∞–∑–¥—ã–≥–∞",
            "quala" : "üë®üèª‚Äçüî¨ –ü–µ–π—Å—è—Ä–ª—è—Ä",
            "zz" : "ü¶† –î–∞—à–∞–≥—ã–Ω –±–æ–π—É",
            "im" : "üõ° –ì–æ—Ç—É–Ω—É–Ω –±–æ–π—É",
            "ll" : "‚ò†Ô∏è –ê–≥–∑—ã–Ω—ã–Ω –±–æ–π—É",
            "bp" : "üïµÔ∏è‚Äç‚ôÇÔ∏è –ê—Ç–æ–Ω–ª–∞—Ä",
            "exp" : "‚ò£Ô∏è –ë–∏–æ-–º–∞–Ω–∞—Ç–ª–∞—Ä",
            "res" : "üß¨ –ë–∏–æ-–≥—è–ø–∏–π–ª—è—Ä",
            "operate" : "üò∑ –°–ø–µ—Ü–æ–ø–µ—Ä–∞—Ü–∏–π",
            "issue" : "ü•Ω –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã"

        },

        "errors" : {
            "wait" : "üë∫ –≥–∏–∂–¥—ã–ª–ª–∞—Ö, –ø–∞—Ç–æ–≥–µ–Ω–ª—è—Ä –π–æ—Ö–¥—É –±–ª–µ!",
            "10" : "üë∫ –ø–µ–π—Å—è—Ä, –º–∞–∫—Å–∏–º—É–º 10 –¥—è—Ñ—è!",
            "404" : "üë∫ —Å–∏–∫–∏–º–∏–Ω –±–∞—à—ã –±–ª—è!",
            "again" : "üë∫ –û–Ω—É –π–µ–Ω—è —Å–∏–∫–º—è–∫ –æ–ª–∞—Ä —Å–æ–Ω—Ä–∞",
            "bot" : "üë∫ –ë–æ—Ç—É —Å–∏–∫–º—è–∫ –≥–∞–¥–∞–≥–∞–Ω–¥—ã—Ä!",
            "victim" : "üë∫ –ì—è—Ö–ø—è–Ω–∏ —Ç–∞–º–ø–∞–¥—ã–Ω!"
        }
    }
}
def illness_check(lab):
    text = f""
    if lab.patogen_name != None:
        text = f"ü•¥ –£ –≤–∞—Å –≥–æ—Ä—è—á–∫–∞ –≤—ã–∑–≤–∞–Ω–Ω–∞—è –ø–∞—Ç–æ–≥–µ–Ω–æ–º ¬´`{lab.illness['patogen']}`¬ª\n\n"
    else:
        text = f"ü•¥ –£ –≤–∞—Å –≥–æ—Ä—è—á–∫–∞ –≤—ã–∑–≤–∞–Ω–Ω–∞—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –ø–∞—Ç–æ–≥–µ–Ω–æ–º \n\n"
    return text

def patogenName(lab):
    if lab.theme == "azeri":
        howfuck = "–±–∞–∑–¥—ã–≥–æ–º"
    elif lab.theme == "mafia":
        howfuck = "–ø—Ä–∏–µ–º–æ–º"
    elif lab.theme == "hell":
        howfuck = "—Ä–æ–∑—ã–≥—Ä—ã—à–µ–º"
    else:
        howfuck = "–ø–∞—Ç–æ–≥–µ–Ω–æ–º"
    return f"{howfuck} ¬´<code>{lab.patogen_name}</code>¬ª" if lab.patogen_name != None else f"–Ω–µ–∏–∑–≤–µ—Ç–Ω—ã–º {howfuck}"



def attackText(theme, new, first_name, second_name, first_id, second_id, patogen_name, atts, profit, mortality):
    rslt_text = f""
    
    if theme == "azeri":
        ''' –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∞—è —Ç–µ–º–∞ '''
        fucked = "—Å–∏–∫–¥–∏"
        spend = "üß™ –ø–∞—Ç–æ–≥–µ–Ω–ª—è—Ä –≥–µ—Ç–¥–∏"
        gain = "‚ò£Ô∏è –ë—É –≥—è—Ö–ø—è –≤–µ—Ä–∏—Ä"
        bio_res = "–±–∏–æ-–º–∞–Ω–∞—Ç–ª–∞—Ä"
        infect = "‚ò†Ô∏è –ó–∞—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞"
        lol = "üë®‚Äçüî¨ –ë—É –≥–µ—Ö–ø–µ —Å–µ–Ω–∏–Ω –¥–µ–∏–ª—å–¥–∏!!! –ê–º–º–∞ –∏–Ω–¥–∏ —Å—è–Ω–∏–Ω–¥–∏—Ä)"
    
    elif theme == "mafia":
        ''' –ú–∞—Ñ–∏–æ–∑–Ω–∞—è —Ç–µ–º–∞ '''
        fucked = "—É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä–±–æ–≤–∞–ª"
        spend = "üíâ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏"
        gain = "üí∞ –û—Ç–æ–±—Ä–∞–Ω–æ"
        bio_res = "–º–∞–Ω–∞—Ç"
        infect = "‚è≥ –û—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∞ –ø–æ–≤–æ–¥–∫–µ –∫–ª–∞–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ"
        lol = "ü•∑ –í—ã –ø–æ–ø–æ–ª–Ω–∏–ª–∏ —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö —à–µ—Å—Ç–µ—Ä–æ–∫ –Ω–æ–≤—ã–º –æ—Å–≤–µ–¥–æ–º–∏—Ç–µ–ª–µ–º"
    
    elif theme == "hell":
        ''' –•–µ–ª–ª–æ—É–∏–Ω '''
        fucked = "–Ω–∞–ø—É–≥–∞–ª"
        spend = "üëª –ü–æ—Ç—Ä–∞—á–µ–Ω–æ —É–∂–∞—Å—Ç–∏–∫–æ–≤"
        gain = "ü©∏ –ü–æ–ª—É—á–µ–Ω–æ"
        bio_res = "–∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞"
        infect = "üåô –ü—É–≥–∞—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–æ–¥–ª–∏—Ç—Å—è"
        lol = "üéÉ –ñ–µ—Ä—Ç–≤–∞ –≤–ø–µ—Ä–≤—ã–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∞—Å—å —Å –≤–∞—à–µ–π —à–∞–ª–æ—Å—Ç—å—é –∏ –±—É–¥–µ—Ç –≤ —à–æ–∫–µ"
    else:
        ''' –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞ '''
        fucked = "–ø–æ–¥–≤–µ—Ä–≥ –∑–∞—Ä–∞–∂–µ–Ω–∏—é"
        spend = "üß™ –ó–∞—Ç—Ä–∞—á–µ–Ω–æ –ø–∞—Ç–æ–≥–µ–Ω–æ–≤"
        gain = "‚ò£Ô∏è –ñ–µ—Ä—Ç–≤–∞ –ø—Ä–∏–Ω–æ—Å–∏—Ç"
        bio_res = "–±–∏–æ-—Ä–µ—Å—É—Ä—Å–∞"
        infect = "‚ò†Ô∏è –ó–∞—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞"
        lol = "üë®‚Äçüî¨ –û–±—ä–µ–∫—Ç –µ—â—ë –Ω–µ –ø–æ–¥–≤–µ—Ä–≥–∞–ª—Å—è –∑–∞—Ä–∞–∂–µ–Ω–∏—é –≤–∞—à–∏–º –ø–∞—Ç–æ–≥–µ–Ω–æ–º"

    hide_victim_link = f'<a href="tg://user?id={second_id}">\xad</a>'
    hide_attacker_link = f'<a href="tg://user?id={first_id}">\xad</a>'

    rslt_text = f"üòé <a href='tg://openmessage?user_id={first_id}'>{first_name}</a>" \
                f" {fucked} " \
                f"<a href='tg://openmessage?user_id={second_id}'>{strconv.normalaze(second_name, replace=str(second_id))}</a>"\
                f" {patogen_name}\n\n"\
                f"{spend}: <i>{atts}</i>\n"\
                f"{gain} <i>{strconv.format_nums(profit)}{bio_res}</i>\n"\
                f"{infect} <i>{mortality} {skloneniye(mortality)}</i>"

    if new:
        rslt_text += f"\n\n<i>{lol}</i>"

    rslt_text += f"{hide_victim_link}"

    return rslt_text

heal_text = (
    "üíä –ö—É–ø–∏—Ç—å –û–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ",
    "üíä –ö—É–ø–∏—Ç—å –ê–ø—Ç–µ—á–∫—É",
    "‚òïÔ∏è –í—ã–ø–∏—Ç—å –º–∞–ª–∏–Ω–æ–≤—ã–π —á–∞–π",
    "üçµ –í—ã–ø–∏—Ç—å –∑–µ–ª–µ–Ω—ã–π —á–∞–π",
    "üë®üèº‚Äç‚öïÔ∏è –ü–æ–π—Ç–∏ –∫ –≤—Ä–∞—á—É",
    "üíâ –í–∫–æ–ª–æ—Ç—å –ê–Ω—Ç–∏–¥–æ—Ç"
)

fuck_against = {
    "standart" : "–ó–∞—Ä–∞–∑–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç",
    "agro" : "–í—ã–µ–±–∞—Ç—å"
}
